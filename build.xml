node{
    
    def mavenHome = tool name: 'maven3.9.0'
    
        stage('Checkout') {
            git branch: 'development',
            credentialsId: 'github',
            url: 'https://github.com/manojmogalla/maven-web-application.git'
        }
        
        stage('Build'){
           sh "${mavenHome}/bin/mvn clean package"
        }
         stage('SonarReport'){
           sh "${mavenHome}/bin/mvn clean sonar:sonar"
        }
        stage('Nexus'){
           sh "${mavenHome}/bin/mvn clean deploy"
        }
post {
        always {
            slackSend (
                color: '#36a64f',
                message: "Build ${currentBuild.result}: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]'",
                tokenCredentialId: 'UasmqOrfgdaqyFh5qrorMMBL',
                channel: '#devops'
            )
        }
    }
}
